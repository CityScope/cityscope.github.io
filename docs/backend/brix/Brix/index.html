<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<title data-react-helmet="true">Brix | Here We Build CityScope</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Brix | Here We Build CityScope"><meta data-react-helmet="true" name="description" content="Introduction"><meta data-react-helmet="true" property="og:description" content="Introduction"><meta data-react-helmet="true" property="og:url" content="https://cityscope.media.mit.edu/docs/backend/brix/Brix"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://cityscope.media.mit.edu/docs/backend/brix/Brix"><link rel="stylesheet" href="/styles.1568f5f0.css">
<link rel="preload" href="/styles.bb334e8f.js" as="script">
<link rel="preload" href="/runtime~main.cb7e892c.js" as="script">
<link rel="preload" href="/main.068850ac.js" as="script">
<link rel="preload" href="/1.d9965f41.js" as="script">
<link rel="preload" href="/2.8ba19fc0.js" as="script">
<link rel="preload" href="/21.1488a2e4.js" as="script">
<link rel="preload" href="/22.0e9bd4bb.js" as="script">
<link rel="preload" href="/935f2afb.673e0a99.js" as="script">
<link rel="preload" href="/17896441.14c81ea3.js" as="script">
<link rel="preload" href="/1c6df3ea.a87ec993.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ML_logo.png" alt="Logo"><strong class="navbar__title">MIT CityScope</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/CityScope" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link" src="img/">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ML_logo.png" alt="Logo"><strong class="navbar__title">MIT CityScope</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/CityScope" target="_blank" rel="noopener noreferrer" class="menu__link" src="img/">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">About</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/general/Docs Development">Docs Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/general/Open Source">Open Source</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/general/License">License</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">CityScope data</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/data/CityScope Types System">CityScope Types System</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Frontend</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/frontend/CityScopeJS">CityScopeJS</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Backend</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/backend/brix/Brix">Brix</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Archive</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/Schema">Schema</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/archive/Specs">Specs</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Brix</h1></header><div class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="introduction"></a>Introduction<a aria-hidden="true" tabindex="-1" class="hash-link" href="#introduction" title="Direct link to heading">#</a></h1><p>What is this library for? If you have never heard of a CityScope before, you might want to stop reading and learn about them <a href="https://cityscope.media.mit.edu/" target="_blank" rel="noopener noreferrer">here</a>. CityScope is an awesome way to interact, explore, and co-create urban interventions in a way that can be accessed by multiple people with different background. If you know what they are, please keep reading.</p><p>What is a CityScope table? a â€˜tableâ€™ is our way of describing a CityScope project. Why table then? Since historically, most CityScope instances were composed of a mesh between a physical table-top 3D model of a city, augmented with projections, software, and other interface hardware. So a table =&gt; project.</p><p>What is an indicator? An indicator is the result of running a module for CityScope. Indicators work by listening for updated from the CityScope table they are linked to, calculating some values by using a model, some function of the data, or a simulation, and then post the result of the calculations to CityIO to be displayed in the table.</p><p>What are the types of indicators you can build? Indicators can be anything that could be displayed on a CityScope table, including the supporting screens associated to it. For the purpose of this library, we distinguish three types of indicator: numeric, heatmap, simulation.</p><ul><li>Numeric: Numeric indicators are just a number or set of numbers. They are usually displayed in a chart (bar chart, radar chart, etc) next to the table. The most common numeric indicator are the numbers that go in the radar plot, which display information about density, diversity, and proximity.</li></ul><ul><li>Heatmap: These indicators are geodata. They are made up of geometries (points, lines, or polygons) and properties associated to them. These indicators are displayed as layers directly on the CityScope table.</li></ul><ul><li>Simulation: These type of indicators are also displayed on the table but they are the result of an agent based simulation and are therefore displayed as a dynamic layer. They change over time like a short movie. These are not yet supported by this library.</li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="classes"></a>Classes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#classes" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="handler-class"></a>Handler class<a aria-hidden="true" tabindex="-1" class="hash-link" href="#handler-class" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="class-brixhandlertable_name-geogriddata_varnamegeogriddata-geogrid_varnamegeogrid-quietlytrue-host_moderemote-referencenone"></a>class brix.Handler(table_name, GEOGRIDDATA_varname=&#x27;GEOGRIDDATA&#x27;, GEOGRID_varname=&#x27;GEOGRID&#x27;, quietly=True, host_mode=&#x27;remote&#x27;, reference=None)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#class-brixhandlertable_name-geogriddata_varnamegeogriddata-geogrid_varnamegeogrid-quietlytrue-host_moderemote-referencenone" title="Direct link to heading">#</a></h3><p>Class to handle the connection for indicators built based on data from the GEOGRID. To use, instantiate the class and use the <code>add_indicator()</code> method to pass it a set of <code>Indicator</code> objects.</p><ul><li><p><strong>Parameters</strong></p><ul><li><strong>table_name</strong> (<em>str</em>) â€“ Table name to lisen to.
<a href="https://cityio.media.mit.edu/api/table/table_name" target="_blank" rel="noopener noreferrer">https://cityio.media.mit.edu/api/table/table_name</a></li></ul></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **GEOGRIDDATA_varname** (str, defaults to GEOGRIDDATA) â€“ Name of geogrid-data variable in the table API.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The object located at:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[https://cityio.media.mit.edu/api/table/table_name/GEOGRIDDATA_varname](https://cityio.media.mit.edu/api/table/table_name/GEOGRIDDATA_varname)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">will be used as input for the return_indicator function in each indicator class.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **GEOGRID_varname** (str, defaults to GEOGRID) â€“ Name of variable with geometries.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **quietly** (boolean, defaults to True) â€“ If True, it will show the status of every API call.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **reference** (*dict**, **optional*) â€“ Dictionary for reference values for each indicator.</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="add_indicatori-testtrue"></a>add_indicator(I, test=True)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#add_indicatori-testtrue" title="Direct link to heading">#</a></h4><p>Adds indicator to handler object.</p><ul><li><p><strong>Parameters</strong></p><ul><li><strong>I</strong> (<code>brix.Indicator</code>) â€“ Indicator object to handle. If indicator has name, this will use as identifier. If indicator has no name, it will generate an identifier.</li></ul></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **test** (boolean, defaults to True) â€“ If True it will ensure the indicator runs before adding it to the `brix.Handler`.</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="add_indicatorsindicator_list-testtrue"></a>add_indicators(indicator_list, test=True)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#add_indicatorsindicator_list-testtrue" title="Direct link to heading">#</a></h4><p>Same as <code>brix.Handler.add_indicator()</code> but it takes in a list of <code>brix.Indicator</code> objects.</p><ul><li><p><strong>Parameters</strong></p><p><strong>indicator_list</strong> (<em>list</em>) â€“ List of <code>brix.Indicator</code> objects.</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="check_tablereturn_valuefalse"></a>check_table(return_value=False)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#check_tablereturn_valuefalse" title="Direct link to heading">#</a></h4><p>Prints the front end url for the table.</p><ul><li><p><strong>Parameters</strong></p><p><strong>return_value</strong> (boolean, defaults to False) â€“ If True it will print and return the front end url.</p></li></ul><ul><li><p><strong>Returns</strong></p><p><strong>front_end_url</strong> â€“ Onlye if return_value=True.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>str</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="clear_table"></a>clear_table()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#clear_table" title="Direct link to heading">#</a></h4><p>Clears all indicators from the table.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get_geogrid_datainclude_geometriesfalse-with_propertiesfalse-as_dffalse"></a>get_geogrid_data(include_geometries=False, with_properties=False, as_df=False)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get_geogrid_datainclude_geometriesfalse-with_propertiesfalse-as_dffalse" title="Direct link to heading">#</a></h4><p>Returns the geogrid data from:
<a href="http://cityio.media.mit.edu/api/table/table_name/GEOGRIDDATA" target="_blank" rel="noopener noreferrer">http://cityio.media.mit.edu/api/table/table_name/GEOGRIDDATA</a></p><ul><li><p><strong>Parameters</strong></p><ul><li><strong>include_geometries</strong> (boolean, defaults to False) â€“ If True it will also add the geometry information for each grid unit.</li></ul></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **as_df** (boolean, defaults to False) â€“ If True it will return data as a pandas.DataFrame.</span></div></div></div></div></div><ul><li><p><strong>Returns</strong></p><p><strong>geogrid_data</strong> â€“ Data taken directly from the table to be used as input for <code>brix.Indicator.return_indicator</code>.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>dict</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get_geogrid_props"></a>get_geogrid_props()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get_geogrid_props" title="Direct link to heading">#</a></h4><p>Gets the GEOGRID properties defined for the table. These properties are not dynamic and include things such as the NAICS and LBCS composition of each lego type.</p><ul><li><p><strong>Returns</strong></p><p><strong>geogrid_props</strong> â€“ Table GEOGRID properties.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>dict</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get_grid_hash"></a>get_grid_hash()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get_grid_hash" title="Direct link to heading">#</a></h4><p>Retreives the GEOGRID hash from:
<a href="http://cityio.media.mit.edu/api/table/table_name/meta/hashes" target="_blank" rel="noopener noreferrer">http://cityio.media.mit.edu/api/table/table_name/meta/hashes</a></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get_indicator_valuesinclude_compositefalse"></a>get_indicator_values(include_composite=False)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get_indicator_valuesinclude_compositefalse" title="Direct link to heading">#</a></h4><p>Returns the current values of numeric indicators. Used for developing a composite indicator.</p><ul><li><p><strong>Parameters</strong></p><p><strong>include_composite</strong> (boolean, defaults to False) â€“ If True it will also include the composite indicators, using the <code>brix.Indicator</code> is_composite parameter.</p></li></ul><ul><li><p><strong>Returns</strong></p><p><strong>indicator_values</strong> â€“ Dictionary with values for each indicator formatted as: <code>{indicator_name: indicator_value, ...}</code></p></li></ul><ul><li><p><strong>Return type</strong></p><p>dict</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get_table_properties"></a>get_table_properties()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get_table_properties" title="Direct link to heading">#</a></h4><p>Gets table properties. This info can also be accessed through <code>brix.Handler.get_geogrid_props()</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="indicatorname"></a>indicator(name)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#indicatorname" title="Direct link to heading">#</a></h4><p>Returns the <code>brix.Indicator</code> with the given name.</p><ul><li><p><strong>Parameters</strong></p><p><strong>name</strong> (<em>str</em>) â€“ Name of the indicator. See <code>brix.Handler.list_indicators()</code>.</p></li></ul><ul><li><p><strong>Returns</strong></p><p><strong>selected_indicator</strong> â€“ Selected indicator object.</p></li></ul><ul><li><p><strong>Return type</strong></p><p><code>brix.Indicator</code></p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="list_indicators"></a>list_indicators()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#list_indicators" title="Direct link to heading">#</a></h4><p>Returns list of all indicator names.</p><ul><li><p><strong>Returns</strong></p><p><strong>indicators_names</strong> â€“ List of indicator names.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>list</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="listenshowfronttrue-appendfalse"></a>listen(showFront=True, append=False)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#listenshowfronttrue-appendfalse" title="Direct link to heading">#</a></h4><p>Listen for changes in the tableâ€™s geogrid and update all indicators accordingly.
You can use the update_package method to see the object that will be posted to the table.
This method starts with an update before listening.</p><ul><li><p><strong>Parameters</strong></p><ul><li><strong>showFront</strong> (boolean, defaults to True) â€“ If True it will open the front-end URL in a webbrowser at start.</li></ul></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **append** (boolean, defaults to False) â€“ If True it will append the new indicators to whatever is already there.</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="perform_updategrid_hash_idnone-appendtrue"></a>perform_update(grid_hash_id=None, append=True)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#perform_updategrid_hash_idnone-appendtrue" title="Direct link to heading">#</a></h4><p>Performs single table update.</p><ul><li><p><strong>Parameters</strong></p><ul><li><strong>grid_hash_id</strong> (<em>str<strong>, </strong>optional</em>) â€“ Current grid hash id. If not provided, it will retrieve it.</li></ul></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **append** (boolean, defaults to True) â€“ If True, it will append the new indicators to whatever is already there.</span></div></div></div></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="return_indicatorindicator_name"></a>return_indicator(indicator_name)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#return_indicatorindicator_name" title="Direct link to heading">#</a></h4><p>Returns the value returned by <code>brix.Indicator.return_indicator()</code> function of the selected indicator.</p><ul><li><p><strong>Parameters</strong></p><p><strong>indicator_name</strong> (<em>str</em>) â€“ Name or identifier of the indicator. See <code>brix.Handler.list_indicators()</code></p></li></ul><ul><li><p><strong>Returns</strong></p><p><strong>indicator_value</strong> â€“ Result of <code>brix.Indicator.return_indicator()</code> function for the selected indicator.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>dict or float</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="rollback"></a>rollback()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#rollback" title="Direct link to heading">#</a></h4><p><code>brix.Handler</code> keeps track of the previous value of the indicators and access values.This function rollsback the current values to whatever the locally stored values are.
See also <code>brix.Handler.previous_indicators()</code> and <code>brix.Handler.previous_access()</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="see_currentindicator_typenumeric"></a>see_current(indicator_type=&#x27;numeric&#x27;)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#see_currentindicator_typenumeric" title="Direct link to heading">#</a></h4><p>Returns the current values of the indicators posted for the table.</p><ul><li><p><strong>Parameters</strong></p><p><strong>indicator_type</strong> (str, defaults to numeric) â€“ Type of the indicator. Choose either numeric, access, or heatmap (access and heatmap refer to the same type).</p></li></ul><ul><li><p><strong>Returns</strong></p><p><strong>current_status</strong> â€“ Current value of selected indicators.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>dict</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="test_indicators"></a>test_indicators()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#test_indicators" title="Direct link to heading">#</a></h4><p>Dry run over all indicators.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="update_packagegeogrid_datanone-appendfalse"></a>update_package(geogrid_data=None, append=False)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#update_packagegeogrid_datanone-appendfalse" title="Direct link to heading">#</a></h4><p>Returns the package that will be posted in CityIO.</p><ul><li><p><strong>Parameters</strong></p><ul><li><strong>geogrid_data</strong> (<em>dict<strong>, </strong>optional</em>) â€“ Result of <code>brix.Handler.get_geogrid_data()</code>. If not provided, it will be retrieved.</li></ul></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **append** (boolean, defaults to False) â€“ If True, it will append the new indicators to whatever is already there.</span></div></div></div></div></div><ul><li><p><strong>Returns</strong></p><p><strong>new_values</strong> â€“ Note that all heatmat indicators have been grouped into just one value.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>list</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="indicator-class"></a>Indicator class<a aria-hidden="true" tabindex="-1" class="hash-link" href="#indicator-class" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="class-brixindicatorargs-kwargs"></a>class brix.Indicator(*args, **kwargs)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#class-brixindicatorargs-kwargs" title="Direct link to heading">#</a></h3><p>Parent class to build indicators from. To use, you need to define a subclass than inherets properties from this class. Doing so, ensures your indicator inherets the necessary methods and properties to connect with a CityScipe table.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get_geogrid_dataas_dffalse-include_geometriesnone-with_propertiesnone"></a>get_geogrid_data(as_df=False, include_geometries=None, with_properties=None)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get_geogrid_dataas_dffalse-include_geometriesnone-with_propertiesnone" title="Direct link to heading">#</a></h4><p>Returns the geogrid data from the linked table. Function mainly used for development. See <code>brix.Indicator.link_table()</code>. It returns the exact object that will be passed to return_indicator</p><ul><li><p><strong>Parameters</strong></p><p><strong>as_df</strong> (boolean, defaults to False) â€“ If True it will return data as a pandas.DataFrame.</p></li></ul><ul><li><p><strong>Returns</strong></p><p><strong>geogrid_data</strong> â€“ Data that will be passed to the <code>brix.Indicator.return_indicator()</code> function by the <code>brix.Handler</code> when deployed.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>str or pandas.DataFrame</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get_table_properties-1"></a>get_table_properties()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get_table_properties-1" title="Direct link to heading">#</a></h4><p>Gets table properties from the linked table. See <code>brix.Indicator.link_table()</code> and <code>brix.Handler.get_table_properties()</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="link_tabletable_name"></a>link_table(table_name)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#link_tabletable_name" title="Direct link to heading">#</a></h4><p>Creates a <code>brix.Handler</code> and links the table to the indicator. This function should be used only for developing the indicator.</p><ul><li><p><strong>Parameters</strong></p><p><strong>table_name</strong> (str or <code>brix.Handler</code>) â€“ Name of the table or Handler object.</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="load_module"></a>load_module()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#load_module" title="Direct link to heading">#</a></h4><p>User defined function. Used to load any data necessary for the indicator to run. In principle, you could do everything using <code>brix.Indicator.setup()</code> but we encourage to separte data loading and module definition into two functions.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="return_baselinegeogrid_data"></a>return_baseline(geogrid_data)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#return_baselinegeogrid_data" title="Direct link to heading">#</a></h4><p>User defined function. Used to return a baseline value.
[This function might get deprecated]</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="return_indicatorgeogrid_data"></a>return_indicator(geogrid_data)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#return_indicatorgeogrid_data" title="Direct link to heading">#</a></h4><p>User defined function. This function defines the value of the indicator as a function of the table state passed as geogrid_data. Function must return either a dictionary, a list, or a number. When returning a dict follow the format: <code>{&#x27;name&#x27;: &#x27;Indicator_NAME&#x27;, &#x27;value&#x27;: 1.00}</code>.</p><ul><li><p><strong>Parameters</strong></p><p><strong>geogrid_data</strong> (<em>dict</em>) â€“ Current state of the table. See <code>brix.Indicator.get_geogrid_data()</code> and <code>brix.Handler.get_geogrid_data()</code>. The content of this object will depend on the needs of the indicator. In particular, the values of <code>brix.Indicator.requires_geometry</code> and <code>brix.Indicator.requires_geogrid_props</code>.</p></li></ul><ul><li><p><strong>Returns</strong></p><p><strong>indicator_value</strong> â€“ Value of indicator or list of values. When returning a dict, please use the format <code>{&#x27;name&#x27;: &#x27;Indicator Name&#x27;, &#x27;value&#x27;: indicator_value}</code>. When returning a list, please return a list of dictionaries in the same format.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>list, dict, or float</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setup"></a>setup()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup" title="Direct link to heading">#</a></h4><p>User defined function. Used to set up the main attributed of the custom indicator. Acts similar to an <strong>init</strong> method.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="indicator-sub-classes"></a>Indicator sub-classes<a aria-hidden="true" tabindex="-1" class="hash-link" href="#indicator-sub-classes" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="class-brixcompositeindicatorargs-kwargs"></a>class brix.CompositeIndicator(*args, **kwargs)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#class-brixcompositeindicatorargs-kwargs" title="Direct link to heading">#</a></h3><p>Subclass used to define composite indicators. Composite indicators are functions of already defined indicators. By defining <code>brix.Indicator.setup()</code> and <code>brix.Indicator.return_indicator()</code>, this class allows you to define a composite indicator by just passing an aggregation function.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get_geogrid_dataas_dffalse-include_geometriesnone-with_propertiesnone-1"></a>get_geogrid_data(as_df=False, include_geometries=None, with_properties=None)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get_geogrid_dataas_dffalse-include_geometriesnone-with_propertiesnone-1" title="Direct link to heading">#</a></h4><p>Returns the geogrid data from the linked table. Function mainly used for development. See <code>brix.Indicator.link_table()</code>. It returns the exact object that will be passed to return_indicator</p><ul><li><p><strong>Parameters</strong></p><p><strong>as_df</strong> (boolean, defaults to False) â€“ If True it will return data as a pandas.DataFrame.</p></li></ul><ul><li><p><strong>Returns</strong></p><p><strong>geogrid_data</strong> â€“ Data that will be passed to the <code>brix.Indicator.return_indicator()</code> function by the <code>brix.Handler</code> when deployed.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>str or pandas.DataFrame</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="get_table_properties-2"></a>get_table_properties()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#get_table_properties-2" title="Direct link to heading">#</a></h4><p>Gets table properties from the linked table. See <code>brix.Indicator.link_table()</code> and <code>brix.Handler.get_table_properties()</code>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="link_tabletable_name-1"></a>link_table(table_name)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#link_tabletable_name-1" title="Direct link to heading">#</a></h4><p>Creates a <code>brix.Handler</code> and links the table to the indicator. This function should be used only for developing the indicator.</p><ul><li><p><strong>Parameters</strong></p><p><strong>table_name</strong> (str or <code>brix.Handler</code>) â€“ Name of the table or Handler object.</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="load_module-1"></a>load_module()<a aria-hidden="true" tabindex="-1" class="hash-link" href="#load_module-1" title="Direct link to heading">#</a></h4><p>User defined function. Used to load any data necessary for the indicator to run. In principle, you could do everything using <code>brix.Indicator.setup()</code> but we encourage to separte data loading and module definition into two functions.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="return_baselinegeogrid_data-1"></a>return_baseline(geogrid_data)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#return_baselinegeogrid_data-1" title="Direct link to heading">#</a></h4><p>User defined function. Used to return a baseline value.
[This function might get deprecated]</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="return_indicatorindicator_values"></a>return_indicator(indicator_values)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#return_indicatorindicator_values" title="Direct link to heading">#</a></h4><p>Applies <code>brix.CompositeIndicator.compose_function</code> to the indicator values to return the composite indicator.</p><ul><li><p><strong>Parameters</strong></p><p><strong>indicator_values</strong> (<em>dict</em>) â€“ Dictionary with indicator values. See <code>brix.Handler.get_indicator_values()</code>.</p></li></ul><ul><li><p><strong>Returns</strong></p><p><strong>indicator_values</strong> â€“ List of one indicator.</p></li></ul><ul><li><p><strong>Return type</strong></p><p>list</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setupcompose_function-selected_indicators-args-kwargs"></a>setup(compose_function, selected_indicators=[], *args, **kwargs)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setupcompose_function-selected_indicators-args-kwargs" title="Direct link to heading">#</a></h4><p>Indicator setup. This function is called upon <strong>init</strong> so user does not need to call it independently.</p><ul><li><p><strong>Parameters</strong></p><ul><li><strong>compose_function</strong> (<em>function</em>) â€“ Function to aggregate values of selected indicators. The function should be build to accept a dictionary with indicator values. See <code>brix.Handler.get_indicator_values()</code>.</li></ul></li></ul><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">* **selected_indicators** (*list**, **optional*) â€“ List of indicators to use to aggregate.</span></div></div></div></div></div><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="tutorial"></a>Tutorial<a aria-hidden="true" tabindex="-1" class="hash-link" href="#tutorial" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="basics-of-building-a-cityscope-indicator"></a>Basics of building a CityScope indicator<a aria-hidden="true" tabindex="-1" class="hash-link" href="#basics-of-building-a-cityscope-indicator" title="Direct link to heading">#</a></h2><p>Letâ€™s get to it. First, what table are you building for? If you donâ€™t have a specific table, that is totally okay and you can create one <a href="https://cityscope.media.mit.edu/CS_cityscopeJS/" target="_blank" rel="noopener noreferrer">here</a>. Note: by the time you read this, CityScope might pose some limitations on new projects (<code>tables</code>). Please follow instructions in the link above.
For this tutorial, we crated one called <code>dungeonmaster</code>.</p><p>An indicator will basically take in data, and produce a result. Each new indicator is built as an subclass of the <code>brix.Indicator</code> class provided in this library. Make sure you define three functions: <code>brix.Indicator.setup()</code>, <code>brix.Indicator.load_module()</code>, and <code>brix.Indicator.return_indicator()</code>. Hereâ€™s a barebones example of an indicator:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">from brix import Indicator</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class MyIndicator(Indicator):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;&#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        Write a description for your indicator here.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;&#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        def setup(self):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &#x27;&#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Think of this as your __init__.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Here you will define the properties of your indicator.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                Although there are no required properties, be nice and give your indicator a name.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &#x27;&#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                self.name = &#x27;Alfonso&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        def load_module(self):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &#x27;&#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                This function is not strictly necessary, but we recommend that you define it if you want to load something from memory. It will make your code more readable.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &#x27;&#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                pass</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        def return_indicator(self, geogrid_data):</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &#x27;&#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                This is the main course of your indicator.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                This function takes in `geogrid_data` and returns the value of your indicator.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                The library is flexible enough to handle indicators that return a number or a dictionary.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                &#x27;&#x27;&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                return 1</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="lets-talk-data-input"></a>Letâ€™s talk data (input)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#lets-talk-data-input" title="Direct link to heading">#</a></h2><p>What is <code>geogrid_data</code>?
Every time we create a CityScope table, we define a regularly spaced grid which is overlaid on the city district weâ€™re modelling. These grid cells are the basic unit of analysis for the CityScope modules. Every grid cell has properties such as the <code>Type</code> which represents the land use and <code>Height</code> which represents the number of floors. These data are dynamic and are updated each time a user interacts with the CityScope table, experimenting with the spatial organisation of land uses and infrastructure. These dynamic data are stored the variable geogrid_data. This is a list of ojects: one for each grid cell in the CityScope table. The contents of each object really depends on the specific table you are building for and on the properties assigned to your indicator. There are two options that will control what geogrid_data contains which are: <code>brix.Indicator.requires_geometry</code> and <code>brix.Indicator.requires_geogrid_props</code>. These two properties are set to <code>False</code> by default, but you can change them inside the <code>brix.Indicator.setup()</code> function depending on the needs of your indicator.</p><p>Go ahead, take a look at how this object looks like by instantiating your class and linking it to a table:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">I = MyIndicator()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I.link_table(&#x27;dungeonmaster&#x27;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I.get_geogrid_data()</span></div></div></div></div></div><p>Please note that the <code>brix.Indicator.link_table()</code> should only be used when developing the indicator. For deployment, weâ€™ll use the <code>brix.Handler</code> class that is more efficient. You can also skip the <code>brix.Indicator.link_table()</code> step by defining the <code>Indicator.table_name=&#x27;dungeonmaster&#x27;</code> property in your <code>setup</code> function. You will also notice that as you change the <code>brix.Indicator.requires_geometry</code> and <code>brix.Indicator.requires_geogrid_props</code> parameters in <code>setup</code>, the output of <code>brix.Indicator.get_geogrid_data()</code> will change.</p><p>If you are testing and are curious how <code>geogrid_data</code> would look like if you set <code>requires_geometry=True</code>, you can pass the argument to <code>get_geogrid_data</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">I.get_geogrid_data(include_geometries=True)</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="build-and-test-your-indicator-output"></a>Build and test your indicator (output)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#build-and-test-your-indicator-output" title="Direct link to heading">#</a></h2><p>This library ensures that you can focus on what you do best: writing a kick ass <code>brix.Indicator.return_indicator()</code> function that will make everyoneâ€™s urban planning life better.</p><p>To test your function while debugging it, you can use the object returned by <code>brix.Indicator.get_geogrid_data()</code>:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">geogrid_data = I.get_geogrid_data()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">I.return_indicator(geogrid_data)</span></div></div></div></div></div><p>The property <code>brix.Indicator.indicator_type</code> will toggle between a Heatmap indicator or a numeric indicator (<code>numeric</code> for nueric and <code>heatmap</code> for heatmap).</p><p>For numeric indicators, there are multiple ways in which the front end can display them (e.g. bar chart, radar plot, etc.). This is controlled by the <code>brix.Indicator.viz_type</code> property of the class. The default value is set to <code>self.viz_type=radar</code> which means that unless it is specified otherwise, all numeric indicators will be added to the radar plot. When building an indicator that returns a single number you can just change the value of this parameter in the <code>brix.Indicator.setup()</code>. When building an indicator that returns multiple numbers it will just assume every number should be displayed in the same front end visualization. If you want to have more fine control of where each indicator is displayed, we recommend building your return_indicator function such that it returns a dictionary with the following structure:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;name&#x27;: &#x27;Social Wellbeing&#x27;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;value&#x27;: random.random(),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        &#x27;viz_type&#x27;: &#x27;bar&#x27;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Note that if you define <code>viz_type</code> in the return dictionary of <code>return_indicator</code>, it will overwrite any default property defined in <code>setup</code>. Remember that your <code>return_indicator</code> function can also return a list of indicators. In the following example of a return value for the <code>return_indicator</code> function, the indicator returns two numbers that should be displayed in the radar plot, and one to be displayed as a bar chart.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {&#x27;name&#x27;: &#x27;Social Wellbeing&#x27;, &#x27;value&#x27;: 0.3, &#x27;viz_type&#x27;: &#x27;radar&#x27;},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {&#x27;name&#x27;: &#x27;Environmental Impact&#x27;, &#x27;value&#x27;: 0.1, &#x27;viz_type&#x27;: &#x27;radar&#x27;},</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        {&#x27;name&#x27;: &#x27;Mobility Impact&#x27;, &#x27;value&#x27;: 0.5, &#x27;viz_type&#x27;: &#x27;bar&#x27;}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="deploy-your-indicator"></a>Deploy your indicator<a aria-hidden="true" tabindex="-1" class="hash-link" href="#deploy-your-indicator" title="Direct link to heading">#</a></h2><p>Finally, once you have build a series of indicators, the right way to deploy them is to use the <code>brix.Handler</code> class. A <code>brix.Handler</code> object should be the go-to connection to the table and will handle all possible exceptions. The two most important methods are <code>brix.Handler.add_indicators()</code> which takes a list of <code>brix.Indicator</code> objects and connects them to the table, and <code>brix.Handler.listen()</code> that is a method that runs continuously waiting for updates in the CityScope table. The example below assumes you have already defined indicators named Density, Diversity and Proximity in a file named <code>myindicators.py</code>.</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">from brix import Handler</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">from myindicators import Density, Diversity, Proximity</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dens = Density()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">divs = Diversity()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">prox = Proximity()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">H = Handler(&#x27;dungeonmaster&#x27;, quietly=False)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">H.add_indicators([</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        dens,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        divs,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        prox</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">])</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">H.listen()</span></div></div></div></div></div><p>To see the indicators in the handler you can use <code>H.list_indicators()</code> to list the indicator names, and use <code>H.return_indicator(&lt;indicator_name&gt;)</code> to see the value of the indicator. Finally, the function <code>H.update_package()</code> will return the data that will be posted on CityIO.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/CityScope/cityscope.github.io/docs/backend/brix/introduction.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/frontend/CityScopeJS"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« CityScopeJS</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/archive/Schema"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Schema Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#handler-class" class="table-of-contents__link">Handler class</a><ul><li><a href="#class-brixhandlertable_name-geogriddata_varnamegeogriddata-geogrid_varnamegeogrid-quietlytrue-host_moderemote-referencenone" class="table-of-contents__link">class brix.Handler(table_name, GEOGRIDDATA_varname=&#39;GEOGRIDDATA&#39;, GEOGRID_varname=&#39;GEOGRID&#39;, quietly=True, host_mode=&#39;remote&#39;, reference=None)</a></li></ul></li><li><a href="#indicator-class" class="table-of-contents__link">Indicator class</a><ul><li><a href="#class-brixindicatorargs-kwargs" class="table-of-contents__link">class brix.Indicator(*args, **kwargs)</a></li></ul></li><li><a href="#indicator-sub-classes" class="table-of-contents__link">Indicator sub-classes</a><ul><li><a href="#class-brixcompositeindicatorargs-kwargs" class="table-of-contents__link">class brix.CompositeIndicator(*args, **kwargs)</a></li></ul></li><li><a href="#basics-of-building-a-cityscope-indicator" class="table-of-contents__link">Basics of building a CityScope indicator</a></li><li><a href="#lets-talk-data-input" class="table-of-contents__link">Letâ€™s talk data (input)</a></li><li><a href="#build-and-test-your-indicator-output" class="table-of-contents__link">Build and test your indicator (output)</a></li><li><a href="#deploy-your-indicator" class="table-of-contents__link">Deploy your indicator</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="text--center"><div class="margin-bottom--sm"><a href="https://github.com/CityScope" target="_blank" rel="noopener noreferrer" class="footerLogoLink_1zJy"><img class="footer__logo" alt="Logo" src="/img/ML_logo_sml.png"></a></div><div>Copyright Â© 2020 CityScope, MIT City Science</div></div></div></footer></div>
<script src="/styles.bb334e8f.js"></script>
<script src="/runtime~main.cb7e892c.js"></script>
<script src="/main.068850ac.js"></script>
<script src="/1.d9965f41.js"></script>
<script src="/2.8ba19fc0.js"></script>
<script src="/21.1488a2e4.js"></script>
<script src="/22.0e9bd4bb.js"></script>
<script src="/935f2afb.673e0a99.js"></script>
<script src="/17896441.14c81ea3.js"></script>
<script src="/1c6df3ea.a87ec993.js"></script>
</body>
</html>